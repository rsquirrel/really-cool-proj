tmlc: scanner.cmo parser.cmo compiler.cmo
	#ocamlc -c ast.mli
	ocamlc -o tmlc scanner.cmo parser.cmo compiler.cmo

scanner.ml: scanner.mll
	ocamllex scanner.mll

parser.ml parser.mli: parser.mly
	ocamlyacc parser.mly

scanner_test: scanner.cmo parser.cmo
	ocamlc -o scanner_test scanner.cmo parser.cmo scanner_test.ml

clean:
	rm -f *.cmi *.cmo scanner.ml parser.mli parser.ml tmlc scanner_test

# Partially generated by ocamldep
compiler.cmo: scanner.cmo parser.cmi 
	ocamlc -c compiler.ml

compiler.cmx: scanner.cmx parser.cmx 

parser.cmo: parser.cmi parser.ml
	ocamlc -c parser.ml

parser.cmx: parser.cmi 

scanner.cmo: parser.cmi scanner.ml
	ocamlc -c scanner.ml

scanner.cmx: parser.cmx 

scanner_test.cmo: scanner.cmo parser.cmi 
scanner_test.cmx: scanner.cmx parser.cmx

parser.cmi: parser.mli
	ocamlc -c parser.mli
