all: scanner_test tmlc

tmlc: scanner.cmo parser.cmo compiler.cmo tml.ml
	ocamlc -o tmlc scanner.cmo parser.cmo compiler.cmo tml.ml

scanner.ml: scanner.mll
	ocamllex scanner.mll

parser.ml parser.mli: parser.mly ast.cmi
	ocamlyacc parser.mly

compiler.cmo: compiler.ml bytecode.cmi
	ocamlc -c compiler.ml

bytecode.cmi: bytecode.mli ast.cmi
	ocamlc -c bytecode.mli

scanner_test: scanner.cmo parser.cmo
	ocamlc -o scanner_test scanner.cmo parser.cmo scanner_test.ml

%.cmo : %.ml
	ocamlc -c $<

%.cmi : %.mli
	ocamlc -c $<

.PHONY: clean
clean:
	rm -f *.cmi *.cmo scanner.ml parser.mli parser.ml tmlc scanner_test

# Generated by ocamldep
compiler.cmo: scanner.cmo parser.cmi 
compiler.cmx: scanner.cmx parser.cmx 
parser.cmo: parser.cmi 
parser.cmx: parser.cmi 
scanner.cmo: parser.cmi 
scanner.cmx: parser.cmx 
scanner_test.cmo: scanner.cmo parser.cmi 
scanner_test.cmx: scanner.cmx parser.cmx 
parser.cmi: 
